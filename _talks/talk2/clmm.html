<!DOCTYPE html>
<html>
<head>
    <title>CLMM x-y Pool Curve</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .chart {
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>CLMM池子中的x-y关系曲线</h1>
        <div id="chart" class="chart"></div>
    </div>

    <script>
        // CLMM参数
        const Pa = 0.8;
        const Pb = 1.2;
        const sqrtPa = Math.sqrt(Pa);
        const sqrtPb = Math.sqrt(Pb);
        const Lv = 100;

        // x-y关系公式
        // y = (Lv^2) / (x + Lv/sqrtPb) - Lv*sqrtPa
        const xMin = -Lv / sqrtPb + 1e-6; // 避免分母为0
        const xMax = 200;
        const xArr = [];
        const yArr = [];
        for (let i = 0; i < 200; i++) {
            const x = xMin + (xMax - xMin) * i / 199;
            const y = (Lv * Lv) / (x + Lv / sqrtPb) - Lv * sqrtPa;
            xArr.push(x);
            yArr.push(y);
        }

        // 绘制CLMM x-y关系曲线
        const clmmTrace = {
            x: xArr,
            y: yArr,
            type: 'scatter',
            mode: 'lines',
            name: 'CLMM x-y关系',
            line: {
                color: 'red',
                width: 2
            }
        };

        const layout = {
            title: 'CLMM池子中的x-y关系曲线',
            xaxis: {
                title: '池子中的x数量',
                range: [xMin, xMax]
            },
            yaxis: {
                title: '池子中的y数量',
                range: [Math.min(...yArr), Math.max(...yArr)]
            }
        };

        Plotly.newPlot('chart', [clmmTrace], layout);
    </script>
</body>
</html> 